import{o as D,t as H,a as O,b as k,c as _,e as E,d as p,i as b,k as x}from"./action.9792744f.js";import{d as S,r as w,w as q}from"./singletons.f8a34b6d.js";import{P as C}from"./scheduler.60fdcb34.js";function I({page:l=1,totalPages:o,siblingCount:u=1}){const n=[],i=new Set([1,o]),c=3+u,f=o-2-u;if(c>f)for(let t=2;t<=o-1;t++)i.add(t);else if(l<c)for(let t=2;t<=Math.min(c,o);t++)i.add(t);else if(l>f)for(let t=o-1;t>=Math.max(f,2);t--)i.add(t);else for(let t=Math.max(l-u,2);t<=Math.min(l+u,o);t++)i.add(t);const m=t=>{n.push({type:"page",value:t,key:`page-${t}`})},d=()=>{n.push({type:"ellipsis",key:`ellipsis-${n.length}`})};let y=0;for(const t of Array.from(i).sort((P,g)=>P-g))t-y>1&&d(),m(t),y=t;return n}const L={perPage:1,siblingCount:1,defaultPage:1},{name:M,selector:N}=_("pagination");function j(l){const o={...L,...l},u=o.page??q(o.defaultPage),n=D(u,o==null?void 0:o.onPageChange),i=H(O(o,"page","onPageChange","defaultPage")),{perPage:c,siblingCount:f,count:m}=i,d=S([m,c],([e,a])=>Math.ceil(e/a)),y=S([n,c,m],([e,a,s])=>{const r=(e-1)*a,h=Math.min(r+a,s);return{start:r,end:h}}),t=k(M(),{returned:()=>({"data-scope":"pagination"})}),P=S([n,d,f],([e,a,s])=>I({page:e,totalPages:a,siblingCount:s})),g=e=>{const a=e.target;if(!b(a))return;const s=a.closest('[data-scope="pagination"]');if(!b(s))return;const r=Array.from(s.querySelectorAll(N("page"))).filter(B=>b(B)),h=s.querySelector(N("prev")),W=s.querySelector(N("next"));b(h)&&r.unshift(h),b(W)&&r.push(W);const v=r.indexOf(a);e.key===x.ARROW_LEFT&&v!==0?(e.preventDefault(),r[v-1].focus()):e.key===x.ARROW_RIGHT&&v!==r.length-1?(e.preventDefault(),r[v+1].focus()):e.key===x.HOME?(e.preventDefault(),r[0].focus()):e.key===x.END&&(e.preventDefault(),r[r.length-1].focus())},A=k(M("page"),{stores:n,returned:e=>a=>({"aria-label":`Page ${a.value}`,"data-value":a.value,"data-selected":a.value===e?"":void 0}),action:e=>({destroy:E(p(e,"click",()=>{const s=e.dataset.value;!s||Number.isNaN(+s)||n.set(Number(s))}),p(e,"keydown",g))})}),R=k(M("prev"),{stores:n,returned:e=>({"aria-label":"Previous",disabled:e<=1}),action:e=>({destroy:E(p(e,"click",()=>{n.update(s=>Math.max(s-1,1))}),p(e,"keydown",g))})}),T=k(M("next"),{stores:[n,d],returned:([e,a])=>({"aria-label":"Next",disabled:e>=a}),action:e=>({destroy:E(p(e,"click",()=>{const s=C(d);n.update(r=>Math.min(r+1,s))}),p(e,"keydown",g))})});return{elements:{root:t,pageTrigger:A,prevButton:R,nextButton:T},states:{range:w(y),page:n,pages:w(P),totalPages:w(d)},options:i}}export{j as c};
