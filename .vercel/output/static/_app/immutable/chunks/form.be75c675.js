import{R as N,Q as h}from"./scheduler.60fdcb34.js";import{b as p,a as A}from"./navigation.82bf316a.js";const I=(o,c=0)=>{const e=o.getBoundingClientRect();return e.top>=c&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},q=(o,c=1.125,e="smooth")=>{const s=o.getBoundingClientRect().top+window.pageYOffset-window.innerHeight/(2*c);window.scrollTo({left:0,top:s,behavior:e})};var r;(function(o){o[o.Idle=0]="Idle",o[o.Submitting=1]="Submitting",o[o.Delayed=2]="Delayed",o[o.Timeout=3]="Timeout"})(r||(r={}));const R=new Set;let b=!1;function C(o,c,e){let n=r.Idle,u,s,d=!1;const f=R;function w(){m(),T(n!=r.Delayed?r.Submitting:r.Delayed),u=window.setTimeout(()=>{u&&n==r.Submitting&&T(r.Delayed)},e.delayMs),s=window.setTimeout(()=>{s&&n==r.Delayed&&T(r.Timeout)},e.timeoutMs),f.add(m)}function m(){clearTimeout(u),clearTimeout(s),u=s=0,f.delete(m),T(r.Idle)}function E(){f.forEach(t=>t()),f.clear()}function T(t){n=t,c.submitting.set(n>=r.Submitting),c.delayed.set(n>=r.Delayed),c.timeout.set(n>=r.Timeout)}const g=o;function y(t){const i=t.target;e.selectErrorText&&i.select()}function _(){e.selectErrorText&&g.querySelectorAll("input").forEach(t=>{t.addEventListener("invalid",y)})}function x(){e.selectErrorText&&g.querySelectorAll("input").forEach(t=>t.removeEventListener("invalid",y))}const S=o;function D(t){return typeof e.autoFocusOnError=="boolean"?e.autoFocusOnError:!/iPhone|iPad|iPod|Android/i.test(t)}const v=async()=>{if(e.scrollToError=="off")return;const t=e.errorSelector;if(!t)return;await h();let i;if(i=S.querySelector(t),!i)return;i=i.querySelector(t)??i;const a=e.stickyNavbar?document.querySelector(e.stickyNavbar):null;if(typeof e.scrollToError!="string"?i.scrollIntoView(e.scrollToError):I(i,(a==null?void 0:a.offsetHeight)??0)||q(i,void 0,e.scrollToError),!D(navigator.userAgent))return;let l;if(l=i,["INPUT","SELECT","BUTTON","TEXTAREA"].includes(l.tagName)||(l=l.querySelector('input:not([type="hidden"]):not(.flatpickr-input), select, textarea')),l)try{l.focus({preventScroll:!0}),e.selectErrorText&&l.tagName=="INPUT"&&l.select()}catch{}};{_();const t=(i,a=!1)=>{m(),i||setTimeout(v),a&&!d&&E()};return N(()=>{x(),t(!0)}),b||(p(()=>{d=!0}),A(i=>{i.type!="enter"&&(d=!1,E())}),b=!0),{submitting:()=>{d=!1,w()},completed:t,scrollToFirstError:()=>{setTimeout(v)},isSubmitting:()=>n===r.Submitting||n===r.Delayed}}}export{C as F};
