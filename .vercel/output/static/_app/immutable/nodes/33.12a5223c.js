import{s as Pe,k as Te,n as ie,a4 as fe,a5 as Fe,G as Ne,a as j,e as P,g as y,c as T,m as ve,b as C,f as m,o as E,x as me,I as Ce,i as $,h as F,J as Ie,u as Be,w as ce,t as ne,d as oe,j as de,l as ae}from"../chunks/scheduler.60fdcb34.js";import{S as De,i as Ve,c as q,a as A,m as L,t as I,b as k,d as U,g as _e,e as pe}from"../chunks/index.c7b4b125.js";import{e as Y}from"../chunks/each.e5af29b3.js";import{p as Me}from"../chunks/stores.b0332cd2.js";import{s as qe,F as Ae}from"../chunks/index.92f1b852.js";import{T as Le}from"../chunks/textarea.8860c336.js";import{I as ue}from"../chunks/input.b0365756.js";import{B as Ue}from"../chunks/button.0888a59b.js";import{P as Ge}from"../chunks/Page.1107c6af.js";import{g as He}from"../chunks/navigation.82bf316a.js";/* empty css                                                       */import{I as ge}from"../chunks/Icon.8be3835b.js";import{f as Je}from"../chunks/client.3119d533.js";import{z as M}from"../chunks/index.0ec66d4d.js";const Re=M.object({name:M.string(),description:M.string().nullable().optional(),logo:M.string().url().nullable().optional(),titleImage:M.string().url().nullable().optional(),organizationId:M.string().nullable().optional(),Events:M.array(M.object({name:M.string().optional(),id:M.string().optional()})).optional()});function Ee(n,e,r){const l=n.slice();return l[12]=e[r],l}function we(n,e,r){const l=n.slice();return l[12]=e[r],l}function ke(n,e,r){const l=n.slice();return l[17]=e[r],l}function Se(n){let e,r=n[17].name+"",l,a,i,s;return{c(){e=P("option"),l=ne(r),a=j(),this.h()},l(o){e=T(o,"OPTION",{});var f=C(e);l=oe(f,r),a=y(f),f.forEach(m),this.h()},h(){e.__value=i=n[17].id,me(e,e.__value),e.selected=s=!!n[7].organizationId},m(o,f){$(o,e,f),F(e,l),F(e,a)},p(o,f){f&1&&r!==(r=o[17].name+"")&&de(l,r),f&1&&i!==(i=o[17].id)&&(e.__value=i,me(e,e.__value)),f&129&&s!==(s=!!o[7].organizationId)&&(e.selected=s)},d(o){o&&m(e)}}}function ze(n){let e,r,l=Y(n[5].data.Events),a=[];for(let s=0;s<l.length;s+=1)a[s]=Oe(we(n,l,s));const i=s=>k(a[s],1,1,()=>{a[s]=null});return{c(){for(let s=0;s<a.length;s+=1)a[s].c();e=ae()},l(s){for(let o=0;o<a.length;o+=1)a[o].l(s);e=ae()},m(s,o){for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(s,o);$(s,e,o),r=!0},p(s,o){if(o&32){l=Y(s[5].data.Events);let f;for(f=0;f<l.length;f+=1){const p=we(s,l,f);a[f]?(a[f].p(p,o),I(a[f],1)):(a[f]=Oe(p),a[f].c(),I(a[f],1),a[f].m(e.parentNode,e))}for(_e(),f=l.length;f<a.length;f+=1)i(f);pe()}},i(s){if(!r){for(let o=0;o<l.length;o+=1)I(a[o]);r=!0}},o(s){a=a.filter(Boolean);for(let o=0;o<a.length;o+=1)k(a[o]);r=!1},d(s){s&&m(e),ce(a,s)}}}function Oe(n){let e,r,l=n[12].name+"",a,i,s,o,f,p;return o=new ge({props:{icon:"mdi:delete-circle"}}),{c(){e=P("div"),r=P("button"),a=ne(l),s=j(),q(o.$$.fragment),f=j(),this.h()},l(d){e=T(d,"DIV",{class:!0});var c=C(e);r=T(c,"BUTTON",{formaction:!0});var b=C(r);a=oe(b,l),b.forEach(m),s=y(c),A(o.$$.fragment,c),f=y(c),c.forEach(m),this.h()},h(){E(r,"formaction",i="?/deleteEvent&eventId="+n[12].id),E(e,"class","flex justify-between items-center")},m(d,c){$(d,e,c),F(e,r),F(r,a),F(e,s),L(o,e,null),F(e,f),p=!0},p(d,c){(!p||c&32)&&l!==(l=d[12].name+"")&&de(a,l),(!p||c&32&&i!==(i="?/deleteEvent&eventId="+d[12].id))&&E(r,"formaction",i)},i(d){p||(I(o.$$.fragment,d),p=!0)},o(d){k(o.$$.fragment,d),p=!1},d(d){d&&m(e),U(o)}}}function je(n){let e,r,l=n[12].name+"",a,i,s,o,f,p;return o=new ge({props:{icon:"material-symbols:add-circle"}}),{c(){e=P("div"),r=P("button"),a=ne(l),s=j(),q(o.$$.fragment),f=j(),this.h()},l(d){e=T(d,"DIV",{class:!0});var c=C(e);r=T(c,"BUTTON",{formaction:!0});var b=C(r);a=oe(b,l),b.forEach(m),s=y(c),A(o.$$.fragment,c),f=y(c),c.forEach(m),this.h()},h(){E(r,"formaction",i="?/addEvent&eventId="+n[12].id),E(e,"class","flex justify-between items-center")},m(d,c){$(d,e,c),F(e,r),F(r,a),F(e,s),L(o,e,null),F(e,f),p=!0},p(d,c){(!p||c&16)&&l!==(l=d[12].name+"")&&de(a,l),(!p||c&16&&i!==(i="?/addEvent&eventId="+d[12].id))&&E(r,"formaction",i)},i(d){p||(I(o.$$.fragment,d),p=!0)},o(d){k(o.$$.fragment,d),p=!1},d(d){d&&m(e),U(o)}}}function Ke(n){let e;return{c(){e=ne("Submit")},l(r){e=oe(r,"Submit")},m(r,l){$(r,e,l)},d(r){r&&m(e)}}}function Qe(n){let e;return{c(){e=P("span"),this.h()},l(r){e=T(r,"SPAN",{class:!0}),C(e).forEach(m),this.h()},h(){E(e,"class","loading loading-dots loading-lg")},m(r,l){$(r,e,l)},d(r){r&&m(e)}}}function We(n){let e;function r(i,s){return i[8]?Qe:Ke}let l=r(n),a=l(n);return{c(){a.c(),e=ae()},l(i){a.l(i),e=ae()},m(i,s){a.m(i,s),$(i,e,s)},p(i,s){l!==(l=r(i))&&(a.d(1),a=l(i),a&&(a.c(),a.m(e.parentNode,e)))},d(i){i&&m(e),a.d(i)}}}function Xe(n){let e,r,l,a,i,s,o,f,p,d="Organization",c,b,B,S,N,Q="None ",Z,z,D,W,h,V,te,x,le,J,re,G,ee,se,he;e=new ue({props:{name:"name",formObj:n[9]}}),l=new Le({props:{name:"description",rows:4,formObj:n[9]}}),i=new ue({props:{name:"logo",formObj:n[9]}}),o=new ue({props:{name:"titleImage",label:"Title Image",formObj:n[9]}});let X=Y(n[0].orgs),w=[];for(let t=0;t<X.length;t+=1)w[t]=Se(ke(n,X,t));D=new ge({props:{icon:"material-symbols:add-circle",width:"44"}});let v=n[5].data.Events&&ze(n),R=Y(n[4]),g=[];for(let t=0;t<R.length;t+=1)g[t]=je(Ee(n,R,t));const ye=t=>k(g[t],1,1,()=>{g[t]=null});return G=new Ue({props:{$$slots:{default:[We]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment),r=j(),q(l.$$.fragment),a=j(),q(i.$$.fragment),s=j(),q(o.$$.fragment),f=j(),p=P("label"),p.textContent=d,c=j(),b=P("div"),B=P("div"),S=P("select"),N=P("option"),N.textContent=Q;for(let t=0;t<w.length;t+=1)w[t].c();Z=j(),z=P("a"),q(D.$$.fragment),h=j(),V=P("div"),v&&v.c(),te=j(),x=P("hr"),le=j(),J=P("div");for(let t=0;t<g.length;t+=1)g[t].c();re=j(),q(G.$$.fragment),this.h()},l(t){A(e.$$.fragment,t),r=y(t),A(l.$$.fragment,t),a=y(t),A(i.$$.fragment,t),s=y(t),A(o.$$.fragment,t),f=y(t),p=T(t,"LABEL",{for:!0,class:!0,["data-svelte-h"]:!0}),ve(p)!=="svelte-185nqhk"&&(p.textContent=d),c=y(t),b=T(t,"DIV",{class:!0});var u=C(b);B=T(u,"DIV",{class:!0});var O=C(B);S=T(O,"SELECT",{name:!0,class:!0});var _=C(S);N=T(_,"OPTION",{["data-svelte-h"]:!0}),ve(N)!=="svelte-1sl0qdz"&&(N.textContent=Q);for(let K=0;K<w.length;K+=1)w[K].l(_);_.forEach(m),O.forEach(m),Z=y(u),z=T(u,"A",{href:!0,class:!0});var H=C(z);A(D.$$.fragment,H),H.forEach(m),u.forEach(m),h=y(t),V=T(t,"DIV",{class:!0});var $e=C(V);v&&v.l($e),$e.forEach(m),te=y(t),x=T(t,"HR",{class:!0}),le=y(t),J=T(t,"DIV",{});var be=C(J);for(let K=0;K<g.length;K+=1)g[K].l(be);be.forEach(m),re=y(t),A(G.$$.fragment,t),this.h()},h(){E(p,"for","organizationId"),E(p,"class","label"),N.__value=null,me(N,N.__value),E(S,"name","organizationId"),E(S,"class","select select-bordered w-full"),n[7].organizationId===void 0&&Ce(()=>n[10].call(S)),E(B,"class","w-full items-center"),E(z,"href",W="/organization/new/edit?"+n[6].url.searchParams.toString()),E(z,"class","text-primary rounded-full shadow-lg"),E(b,"class","pb-4 flex gap-2 justify-between items-center"),E(V,"class","pb-4"),E(x,"class","p-0 pb-4 border-success")},m(t,u){L(e,t,u),$(t,r,u),L(l,t,u),$(t,a,u),L(i,t,u),$(t,s,u),L(o,t,u),$(t,f,u),$(t,p,u),$(t,c,u),$(t,b,u),F(b,B),F(B,S),F(S,N);for(let O=0;O<w.length;O+=1)w[O]&&w[O].m(S,null);Ie(S,n[7].organizationId,!0),F(b,Z),F(b,z),L(D,z,null),$(t,h,u),$(t,V,u),v&&v.m(V,null),$(t,te,u),$(t,x,u),$(t,le,u),$(t,J,u);for(let O=0;O<g.length;O+=1)g[O]&&g[O].m(J,null);$(t,re,u),L(G,t,u),ee=!0,se||(he=Be(S,"change",n[10]),se=!0)},p(t,u){if(u&129){X=Y(t[0].orgs);let _;for(_=0;_<X.length;_+=1){const H=ke(t,X,_);w[_]?w[_].p(H,u):(w[_]=Se(H),w[_].c(),w[_].m(S,null))}for(;_<w.length;_+=1)w[_].d(1);w.length=X.length}if(u&129&&Ie(S,t[7].organizationId),(!ee||u&64&&W!==(W="/organization/new/edit?"+t[6].url.searchParams.toString()))&&E(z,"href",W),t[5].data.Events?v?(v.p(t,u),u&32&&I(v,1)):(v=ze(t),v.c(),I(v,1),v.m(V,null)):v&&(_e(),k(v,1,1,()=>{v=null}),pe()),u&16){R=Y(t[4]);let _;for(_=0;_<R.length;_+=1){const H=Ee(t,R,_);g[_]?(g[_].p(H,u),I(g[_],1)):(g[_]=je(H),g[_].c(),I(g[_],1),g[_].m(J,null))}for(_e(),_=R.length;_<g.length;_+=1)ye(_);pe()}const O={};u&1048832&&(O.$$scope={dirty:u,ctx:t}),G.$set(O)},i(t){if(!ee){I(e.$$.fragment,t),I(l.$$.fragment,t),I(i.$$.fragment,t),I(o.$$.fragment,t),I(D.$$.fragment,t),I(v);for(let u=0;u<R.length;u+=1)I(g[u]);I(G.$$.fragment,t),ee=!0}},o(t){k(e.$$.fragment,t),k(l.$$.fragment,t),k(i.$$.fragment,t),k(o.$$.fragment,t),k(D.$$.fragment,t),k(v),g=g.filter(Boolean);for(let u=0;u<g.length;u+=1)k(g[u]);k(G.$$.fragment,t),ee=!1},d(t){t&&(m(r),m(a),m(s),m(f),m(p),m(c),m(b),m(h),m(V),m(te),m(x),m(le),m(J),m(re)),U(e,t),U(l,t),U(i,t),U(o,t),ce(w,t),U(D),v&&v.d(),ce(g,t),U(G,t),se=!1,he()}}}function Ye(n){let e,r;return e=new Ae({props:{action:"?/series&"+n[6].url.searchParams.toString(),formObj:n[9],$$slots:{default:[Xe]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,a){L(e,l,a),r=!0},p(l,a){const i={};a&64&&(i.action="?/series&"+l[6].url.searchParams.toString()),a&1049073&&(i.$$scope={dirty:a,ctx:l}),e.$set(i)},i(l){r||(I(e.$$.fragment,l),r=!0)},o(l){k(e.$$.fragment,l),r=!1},d(l){U(e,l)}}}function Ze(n){let e,r;return e=new Ge({props:{title:n[5].data.name==="new"?"New Series":n[5].data.name,$$slots:{default:[Ye]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,a){L(e,l,a),r=!0},p(l,[a]){const i={};a&32&&(i.title=l[5].data.name==="new"?"New Series":l[5].data.name),a&1049073&&(i.$$scope={dirty:a,ctx:l}),e.$set(i)},i(l){r||(I(e.$$.fragment,l),r=!0)},o(l){k(e.$$.fragment,l),r=!1},d(l){U(e,l)}}}function xe(n,e,r){let l,a,i,s,o,f,p=ie,d=()=>(p(),p=fe(s,h=>r(11,f=h)),s),c,b,B=ie,S=()=>(B(),B=fe(i,h=>r(7,b=h)),i),N,Q=ie,Z=()=>(Q(),Q=fe(o,h=>r(8,N=h)),o);Te(n,Me,h=>r(6,c=h)),n.$$.on_destroy.push(()=>p()),n.$$.on_destroy.push(()=>B()),n.$$.on_destroy.push(()=>Q());let{data:z}=e;const D=qe(z.form,{taintedMessage:"Finish filling out the form or you will loose your data?",autoFocusOnError:!0,validators:Re,dataType:"json",onUpdated(){const h=c.url.searchParams.get("from");c.url.searchParams.delete("from"),h?He(h+c.url.search,{replaceState:!0}):history.replaceState({from:"/"},"")},onError({result:h}){Fe(s,f=h.error.message,f)},flashMessage:{module:Je,onError:({result:h,message:V})=>{V.set({type:"error",message:h.error.message})}},syncFlashMessage:!1});function W(){b.organizationId=Ne(this),i.set(b),r(0,z)}return n.$$set=h=>{"data"in h&&r(0,z=h.data)},n.$$.update=()=>{n.$$.dirty&1&&r(5,{form:l,events:a}=z,l,(r(4,a),r(0,z)))},S(r(3,{form:i,message:s,delayed:o}=D,i,d(r(2,s)),Z(r(1,o)))),[z,o,s,i,a,l,c,b,N,D,W]}class pt extends De{constructor(e){super(),Ve(this,e,xe,Ze,Pe,{data:0})}}export{pt as component};
